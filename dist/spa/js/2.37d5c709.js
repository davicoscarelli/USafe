(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{0:function(e,t){},1:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},6:function(e,t){},7:function(e,t){},8:function(e,t){},8041:function(e,t,o){"use strict";o("d924")},"8b24":function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-page",{},[o("q-scroll-area",{ref:"chatArea",class:{"chat-area":!e.showOptions,"chat-area-min":e.showOptions}},[e._l(e.messages,(function(t){return o("q-chat-message",{key:t.id,staticClass:"q-px-md q-pt-sm",class:{"message-out":"you"===t.author,"message-in":"you"!==t.author},attrs:{text:[t.text],sent:"bot"!=t.author,"bg-color":"bot"==t.author?"secondary":"#e0e0e0","text-color":"bot"==t.author?"white":"black"}},[t.text2?o("p",[e._v(e._s(t.text2))]):e._e(),t.video?o("q-img",{staticClass:"rounded-borders",attrs:{src:t.video},on:{click:function(o){return e.openVideo(t.videoLink)}}}):e._e(),t.text3?o("p",[e._v(e._s(t.text3))]):e._e(),0==t.id?o("div",{staticClass:"col flex flex-center"},[o("q-btn",{staticClass:"q-ma-xs",staticStyle:{width:"80%"},attrs:{rounded:"",color:"white","no-caps":"","text-color":"primary",label:"Choking"},on:{click:function(t){return e.buttonSend("Choking")}}}),o("q-btn",{staticClass:"q-ma-xs",staticStyle:{width:"80%"},attrs:{rounded:"",color:"white","no-caps":"","text-color":"primary",label:"Bleeding"},on:{click:function(t){return e.buttonSend("Bleeding")}}}),o("q-btn",{staticClass:"q-ma-xs",staticStyle:{width:"80%"},attrs:{rounded:"",color:"white","no-caps":"","text-color":"primary",label:"Drowning"},on:{click:function(t){return e.buttonSend("Drowning")}}}),o("q-btn",{staticClass:"q-ma-xs",staticStyle:{width:"80%"},attrs:{rounded:"",color:"white","no-caps":"","text-color":"primary",label:"Fractures"},on:{click:function(t){return e.buttonSend("Fractures")}}})],1):e._e(),t.warning?o("q-btn",{class:{"bg-red":"Call the emergency!"===t.text,"bg-orange":"Call the emergency!"!==t.text},staticStyle:{width:"100%"},attrs:{icon:"phone",flat:"",color:"white",label:"Call 911",href:"tel:911"}}):e._e()],1)})),e.loading?o("q-chat-message",{staticClass:"q-px-md q-pt-sm message-in",attrs:{"bg-color":"secondary","text-color":"white"}},[o("q-spinner-dots",{attrs:{size:"2rem"}})],1):e._e()],2),o("q-footer",{attrs:{elevated:""}},[o("transition",{attrs:{name:"slide-fade"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.showOptions,expression:"showOptions"}],staticClass:"row bg-secondary q-pa-sm justify-center ",staticStyle:{height:"50px"}},e._l(e.options[e.optionsType],(function(t){return o("q-btn",{key:t,staticClass:"q-mx-sm",staticStyle:{width:"30%"},attrs:{outline:"",rounded:"",color:"white","no-caps":"",dense:"","text-color":"white",label:t},on:{click:function(o){return e.optionSend(t)}}})})),1)]),o("q-toolbar",[o("q-form",{staticClass:"full-width ",on:{submit:function(t){return e.sendMessage("out")}}},[o("div",{staticClass:"row"},[o("q-input",{ref:"newMessage",staticClass:" col-11 q-pr-sm",attrs:{"bg-color":"white",rounded:"",placeholder:"Message",dense:"",outlined:""},model:{value:e.youMessage,callback:function(t){e.youMessage=t},expression:"youMessage"}},[[o("q-btn",{attrs:{round:"",dense:"",flat:"",type:"submit",icon:"send",color:"primary"}})]],2),o("div",{staticClass:"col-1 flex flex-center"},[e.recording?e._e():o("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"mic",color:"white"},on:{click:e.speechToText}}),e.recording?o("q-spinner-bars",{attrs:{color:"white",size:"2em"}}):e._e()],1)],1)])],1)],1)],1)},n=[],i=(o("e6cf"),o("ded3")),a=o.n(i),r=o("b178");const h=o("b2ba");var c={name:"PageIndex",data:()=>({botMessage:{},loading:!1,youMessage:"",recording:!1,history:[],messages:[],options:[["Yes","No"],["Me","Someone else"]],showOptions:!1,optionsType:null}),computed:{user(){return{name:"Davi",age:1}}},created(){},mounted(){this.botMessage={text:"Welcome to WeSafe! Whats your emergency?"},this.synthesizeSpeech(this.botMessage)},methods:{openVideo(e){Object(r["b"])(e)},speechToText(){try{const e=h.SpeechConfig.fromSubscription("80336464dd984e3489ab38cbb895823e","eastus");let t=h.AudioConfig.fromDefaultMicrophoneInput(),o=new h.SpeechRecognizer(e,t);const s=h.PhraseListGrammar.fromRecognizer(o);s.addPhrase(["choking","no","yes","clear","me","other","someone","else"]),console.log("Speak into your microphone."),this.recording=!0,o.recognizeOnceAsync((e=>{this.youMessage=e.text,console.log(`RECOGNIZED: Text=${e.text}`),this.recording=!1,this.sendMessage("out"),this.showOptions=!1}))}catch(e){console.log("recognition",e)}},async synthesizeSpeech(e){let t="";t=e.text2?e.text+" "+e.text2+" "+e.text3:e.text,this.loading=!0;const o=h.SpeechConfig.fromSubscription("80336464dd984e3489ab38cbb895823e","eastus");o.speechSynthesisOutputFormat=h.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm;const s=new h.SpeechSynthesizer(o,void 0);s.speakTextAsync(t,(e=>{const o=e.audioData;this.loading=!1,console.log(t),console.log(`Audio data byte size: ${o.byteLength}.`),s.close(),null!=this.optionsType&&(this.showOptions=!0),console.log(t.length),this.sendMessage("in");let n=this.$refs.chatArea;n.setScrollPosition(n.$el.scrollHeight+1e4,1)}),(e=>{console.log(e),s.close()}))},optionSend(e){this.youMessage=e,this.sendMessage("out"),this.showOptions=!1},buttonSend(e){this.youMessage=e,this.sendMessage("out")},async bot(){let e={text:this.botMessage,optionsType:this.optionsType};const t=JSON.stringify(this.history);console.log(t,"inputtt"),0==this.history[0]?"[0]"==t?e={text:"Is the victim you or someone else?",optionsType:1}:"[0,0]"==t?e={text:"Is the victim having difficulty breathing?",optionsType:0}:"[0,0,0]"==t?e={text:"Is the victim over 8 years old?",optionsType:0}:"[0,0,1]"==t?e={text:"Is the victim conscious?",optionsType:0}:"[0,0,1,0]"==t||"[0,0,1,1]"==t?e={text:"Is the victim over 8 years old?",optionsType:0}:"[0,0,0,1]"==t?e={text:"Recline the victim and let the person cough until what was obstructing the airway comes out or can be removed.",text2:"Keep the victim calm so the situation does not get worse.",text3:"In case of aggravation call emergency!",warning:!0,optionsType:null}:"[0,0,0,0]"==t?e={text:"Hold the victim with one hand, with the fingers positioned on the jaw and supporting the victim's body on his forearm. Tilt the victim's head down and support the weight on the leg. Perform five moderate slaps on the victim's back with the other hand flat.",text2:"Then turn the victim to the front and proceed with five chest thrusts. Repeat the process until the victim breathes.",text3:"In case of aggravation call emergency!",video:"./answer2.gif",videoLink:"http://www.youtube.com/watch?v=gHZdBY-CkGw&t=1m23s",warning:!0,optionsType:null}:"[0,0,1,0,0]"==t?e={text:"Call the emergency!",text2:"Then locate the area over the heart to begin chest compressions â€“ between the breasts and on the lower third of the sternum. Stand or kneel directly over the patient's chest. Lock your elbows and use only your upper bodyweight to supply the force for the chest compressions, and count as you perform them. Perform 30 chest compressions.",text3:"Perform 30 chest compressions. Look inside their mouth. See if any obstructions came loose from the chest compressions. If you see something, sweep it out using your finger. If you don't, breathe into the mouth If you see an object, sweep it out and try two more rescue breaths.",video:"./answer6.gif",videoLink:"https://www.youtube.com/watch?v=_K7Dwy6b2wQ",warning:!0,optionsType:null}:"[0,0,1,0,1]"==t?e={text:"Call the emergency!",text2:"Then lower the person on his or her back onto the floor, arms to the side. Clear the airway. If a blockage is visible at the back of the throat or high in the throat, reach a finger into the mouth and sweep out the cause of the blockage. Don't try a finger sweep if you can't see the object. Be careful not to push the food or object deeper into the airway.",text3:"Begin CPR if the object remains lodged and the person doesn't respond after you take the above measures. The chest compressions used in CPR may dislodge the object. Remember to recheck the mouth periodically.",video:"./answer5.gif",videoLink:"https://www.youtube.com/watch?v=5kmsKNvKAvU",warning:!0,optionsType:null}:"[0,0,1,1,0]"==t?e={text:"Hold the victim with one hand, with the fingers positioned on the jaw and supporting the victim's body on his forearm. Tilt the victim's head down and support the weight on the leg. Perform five moderate slaps on the victim's back with the other hand flat.",text2:"Then turn the victim to the front and proceed with five chest thrusts. Repeat the process until the victim breathes.",text3:"In case of aggravation call emergency!",video:"./answer2.gif",videoLink:"http://www.youtube.com/watch?v=gHZdBY-CkGw&t=1m23s",warning:!0,optionsType:null}:"[0,0,1,1,1]"==t?e={text:"Is the victim Pregnant or Obese?",optionsType:0}:"[0,0,1,1,1,0]"==t?e={text:"Stand or kneel behind the person and wrap your arms around his or her waist. Make a fist with one hand. Place the thumb side of your fist against the person's belly, just above the belly button but well below the breastbone. Grasp your fist with the other hand. Give a quick upward thrust into the belly. This may cause the object to pop out.",text2:" You may need to use more force for a large person and less for a child or small adult. Repeat thrusts until the object pops out or the person faints.",text3:"In case of aggravation call emergency!",video:"./answer3.gif",videoLink:"https://www.youtube.com/watch?v=DE45ks9miIw",warning:!0,optionsType:null}:"[0,0,1,1,1,1]"==t?e={text:"Stand or kneel behind the person and wrap your arms around his or her chest. Make a fist with one hand. Place the thumb side of your fist at the base of the breastbone, just above the joining of the lowest ribs. Grasp your fist with the other hand. Press hard into the chest, with a quick thrust.",text2:" Repeat thrusts until the object pops out or the person faints.",text3:"In case of aggravation call emergency!",video:"./answer4.gif",videoLink:"https://www.youtube.com/watch?v=DHFnxAq1-KM&t=1m50s",warning:!0,optionsType:null}:"[0,1]"===t?e={text:"Are you having trouble breathing?",optionsType:0}:"[0,1,0]"==t?0==this.user.age.length?e={text:"Are you over 8 years old?",optionsType:0}:this.user.age>8?(this.history.push(1),e={text:"Recline yourself and cough until what was obstructing your airway comes out or can be removed.",text2:"Keep calm so the situation does not get worse.",text3:" In case of aggravation call emergency!",warning:!0,optionsType:null}):(this.history.push(0),e={text:"Ask for help and tell the person to follow the next steps:",text2:"Recline the victim and let the person cough until what was obstructing the airway comes out or can be removed.",text3:"Keep the victim calm so the situation does not get worse. In case of aggravation call emergency!",warning:!0,optionsType:null}):"[0,1,1]"==t?0==this.user.age.length?e={text:"Are you over 8 years old?",optionsType:0}:this.user.age>8?(this.history.push(1),e={text:"Lean over a table edge, chair, or railing. Quickly thrust your upper belly area (upper abdomen) against the edge. You can also do this: Make a fist with one hand and put the thumb side between your belly button and rib cage. Place your other hand on top of that. Push as hard as you can in a quick motion straight into your abdomen.",text2:"If you are pregnant, you should place your hands higher than usual, under the breast bone. Another alternative maneuver is to slam your back into a wall while coughing.",text3:"In case of aggravation call emergency!",video:"./answer3_2.gif",videoLink:"https://www.youtube.com/watch?v=ljL9JcK6RnM",warning:!0,optionsType:null}):(this.history.push(0),e={text:"Are you alone?",optionsType:0}):"[0,1,0,0]"===t?e={text:"Ask for help and tell the person to follow the next steps:",text2:"Recline the victim and let the person cough until what was obstructing the airway comes out or can be removed.",text3:"Keep the victim calm so the situation does not get worse. In case of aggravation call emergency!",warning:!0,optionsType:null}:"[0,1,0,1]"===t?e={text:"Recline yourself and cough until what was obstructing your airway comes out or can be removed.",text2:"Keep calm so the situation does not get worse. In case of aggravation call emergency!",warning:!0,optionsType:null}:"[0,1,1,1]"===t?e={text:"Lean over a table edge, chair, or railing. Quickly thrust your upper belly area (upper abdomen) against the edge. You can also do this: Make a fist with one hand and put the thumb side between your belly button and rib cage. Place your other hand on top of that. Push as hard as you can in a quick motion straight into your abdomen.",text2:"If you are pregnant, you should place your hands higher than usual, under the breast bone. Another alternative maneuver is to slam your back into a wall while coughing.",text3:"In case of aggravation call emergency!",video:"./answer3_2.gif",videoLink:"https://www.youtube.com/watch?v=ljL9JcK6RnM",warning:!0,optionsType:null}:"[0,1,1,0,0]"===t?e={text:"Ask for help and tell the person to follow the next steps:",text2:"Recline the victim and let the person cough until what was obstructing the airway comes out or can be removed.",text3:"Keep the victim calm so the situation does not get worse. In case of aggravation call emergency!",warning:!0,optionsType:null}:"[0,1,1,0,1]"===t&&(e={text:"Call the emergency!",warning:!0,optionsType:null}):1==t[0]&&(e={text:"other.1",optionsType:0}),this.botMessage=e,this.optionsType=e.optionsType,await this.synthesizeSpeech(e)},async createHistory(e){let t=e.toLowerCase();console.log("Hmessage",t),"no"!==t&&!this.findWord("no",t)||0==this.history.length?("yep"===t||"yes"===t||"yeah"===t||this.findWord("yes",t)||this.findWord("yep",t)||this.findWord("yeah",t))&&0!=this.history.length?this.history.push(1):"choking"!==t&&!this.findWord("choking",t)||0!=this.history.length?"clear"===t||this.findWord("clear",t)?this.clearAllMessages():"me"!==t&&!this.findWord("me",t)||0==this.history.length?("other"===t||this.findWord("other",t)||t.includes("someone else"))&&0!=this.history.length?this.history.push(0):this.botMessage="Sorry, I didn't understand. Can you repeat?":this.history.push(1):this.history.push(0):this.history.push(0)},findWord(e,t){let o=t.match(/[\w-']+|[^\w\s]+/g).some((function(t){return t===e}));return o},sendMessage(e){if(!this.youMessage&&!this.botMessage)return;"out"===e?(this.messages.push({text:this.youMessage,author:"you",id:this.messages.length}),this.createHistory(this.youMessage),this.youMessage="",this.bot()):"in"===e&&(console.log(this.botMessage,"bot"),this.messages.push(a()(a()({},this.botMessage),{},{author:"bot",id:this.messages.length})),this.botMessage="");let t=this.$refs.chatArea;t.setScrollPosition(t.$el.scrollHeight+1e4,1)},clearAllMessages(){this.messages=[],this.history=[],this.botMessage="Welcome to WeSafe! Whats your emergency?",this.synthesizeSpeech(this.botMessage)}}},l=c,u=(o("8041"),o("2877")),d=Object(u["a"])(l,s,n,!1,null,null,null);t["default"]=d.exports},9:function(e,t){},d924:function(e,t,o){}}]);