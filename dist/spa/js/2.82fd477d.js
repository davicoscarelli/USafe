(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{0:function(e,s){},1:function(e,s){},3:function(e,s){},4:function(e,s){},5:function(e,s){},6:function(e,s){},7:function(e,s){},8:function(e,s){},8041:function(e,s,t){"use strict";t("d924")},"8b24":function(e,s,t){"use strict";t.r(s);var o=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("q-page",{},[t("q-scroll-area",{ref:"chatArea",staticClass:"chat-area"},[e._l(e.messages,(function(s){return t("q-chat-message",{key:s.id,staticClass:"q-px-md q-pt-sm",class:{"message-out":"you"===s.author,"message-in":"you"!==s.author},attrs:{text:[s.body],sent:"bot"!=s.author,"bg-color":"bot"==s.author?"secondary":"#e0e0e0","text-color":"bot"==s.author?"white":"black"}},[0==s.id?t("div",{staticClass:"col flex flex-center"},[t("q-btn",{staticClass:"q-ma-xs",staticStyle:{width:"80%"},attrs:{rounded:"",color:"white","no-caps":"","text-color":"primary",label:"Choking"},on:{click:function(s){return e.buttonSend("Choking")}}}),t("q-btn",{staticClass:"q-ma-xs",staticStyle:{width:"80%"},attrs:{rounded:"",color:"white","no-caps":"","text-color":"primary",label:"Bleeding"},on:{click:function(s){return e.buttonSend("Bleeding")}}}),t("q-btn",{staticClass:"q-ma-xs",staticStyle:{width:"80%"},attrs:{rounded:"",color:"white","no-caps":"","text-color":"primary",label:"Drowning"},on:{click:function(s){return e.buttonSend("Drowning")}}}),t("q-btn",{staticClass:"q-ma-xs",staticStyle:{width:"80%"},attrs:{rounded:"",color:"white","no-caps":"","text-color":"primary",label:"Fractures"},on:{click:function(s){return e.buttonSend("Fractures")}}})],1):e._e()])})),e.loading?t("q-chat-message",{staticClass:"q-px-md q-pt-sm message-in",attrs:{"bg-color":"secondary","text-color":"white"}},[t("q-spinner-dots",{attrs:{size:"2rem"}})],1):e._e()],2),t("q-footer",{attrs:{elevated:""}},[t("q-toolbar",[t("q-form",{staticClass:"full-width ",on:{submit:function(s){return e.sendMessage("out")}}},[t("div",{staticClass:"row"},[t("q-input",{ref:"newMessage",staticClass:" col-11 q-pr-sm",attrs:{"bg-color":"white",rounded:"",placeholder:"Message",dense:"",outlined:""},model:{value:e.youMessage,callback:function(s){e.youMessage=s},expression:"youMessage"}},[[t("q-btn",{attrs:{round:"",dense:"",flat:"",type:"submit",icon:"send",color:"primary"}})]],2),t("div",{staticClass:"col-1 flex flex-center"},[e.recording?e._e():t("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"mic",color:"white"},on:{click:e.speechToText}}),e.recording?t("q-spinner-bars",{attrs:{color:"white",size:"2em"}}):e._e()],1)],1)])],1)],1)],1)},i=[],n=(t("e6cf"),t("c9d0")),a=t.n(n),r=t("2b0e");const c=t("b2ba");r["a"].use(a.a);var h={name:"PageIndex",data:()=>({botMessage:"",loading:!1,youMessage:"",recording:!1,history:[],messages:[]}),computed:{user(){return{name:"Davi",age:7}}},mounted(){this.botMessage="Welcome to WeSafe! Whats your emergency?",this.synthesizeSpeech(this.botMessage)},methods:{speechToText(){try{const e=c.SpeechConfig.fromSubscription("80336464dd984e3489ab38cbb895823e","eastus");let s=c.AudioConfig.fromDefaultMicrophoneInput(),t=new c.SpeechRecognizer(e,s);console.log("Speak into your microphone."),this.recording=!0,t.recognizeOnceAsync((e=>{this.youMessage=e.text,console.log(`RECOGNIZED: Text=${e.text}`),this.recording=!1,this.sendMessage("out")}))}catch(e){console.log("recognition",e)}},async synthesizeSpeech(e){new AudioContext;this.loading=!0;const s=c.SpeechConfig.fromSubscription("80336464dd984e3489ab38cbb895823e","eastus");s.speechSynthesisOutputFormat=c.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm;const t=new c.SpeechSynthesizer(s,void 0);t.speakTextAsync(e,(s=>{const o=s.audioData;this.loading=!1,console.log(e),console.log(`Audio data byte size: ${o.byteLength}.`),t.close(),this.sendMessage("in")}),(e=>{console.log(e),t.close()}))},postMessage(){},buttonSend(e){this.youMessage=e,this.sendMessage("out")},async bot(){let e=this.botMessage;const s=JSON.stringify(this.history);console.log(s,"inputtt"),0==this.history[0]?"[0]"==s?e="Is the victim you or someone else?":"[0,0]"==s?e="Is the victim having difficulty breathing?":"[0,0,0]"==s?e="Is the victim over 8 years old?":"[0,0,1]"==s?e="Is the victim conscious?":"[0,0,1,0]"==s||"[0,0,1,1]"==s?e="Is the victim over 8 years old?":"[0,0,0,1]"==s?e="ANSWER1":"[0,0,0,0]"==s?e="ANSWER2":"[0,0,1,0,0]"==s?e="ANSWER6":"[0,0,1,0,1]"==s?e="ANSWER5":"[0,0,1,1,0]"==s?e="ANSWER2":"[0,0,1,1,1]"==s?e="Is the victim Pregnant or Obese?":"[0,0,1,1,1,0]"==s?e="ANSWER3":"[0,0,1,1,1,1]"==s?e="ANSWER4":"[0,1]"===s?e="Are you having trouble breathing?":"[0,1,0]"==s?0==this.user.age.length?e="Are you over 8 years old?":this.user.age>8?(this.history.push(1),e="ANSWER1"):(this.history.push(0),e="ANSWER2+"):"[0,1,1]"==s?0==this.user.age.length?e="Are you over 8 years old?":this.user.age>8?(this.history.push(1),e="ANSWER3.2"):(this.history.push(0),e="Are you alone?"):"[0,1,0,0]"===s?e="ANSWER2+":"[0,1,0,1]"===s?e="ANSWER1":"[0,1,1,1]"===s?e="ANSWER3.2":"[0,1,1,0,0]"===s?e="ANSWER2+":"[0,1,1,0,1]"===s&&(e="CALL 911"):1==s[0]&&(e="other.1"),this.botMessage=e,await this.synthesizeSpeech(e)},async createHistory(e){let s=e.toLowerCase();console.log("Hmessage",s),"no"!==s&&!s.includes("yes")||0==this.history.length?"yes"!==s&&!s.includes("yes")||0==this.history.length?"choking"!==s&&!s.includes("choking")||0!=this.history.length?"clear"===s||s.includes("clear")?this.clearAllMessages():"me"!==s&&!s.includes("me")||0==this.history.length?"other"!==s&&!s.includes("other")||0==this.history.length?this.botMessage="Sorry, I didn't understand. Can you repeat?":this.history.push(0):this.history.push(1):this.history.push(0):this.history.push(1):this.history.push(0)},sendMessage(e){if(!this.youMessage&&!this.botMessage)return;"out"===e?(this.messages.push({body:this.youMessage,author:"you",id:this.messages.length}),this.createHistory(this.youMessage),this.youMessage="",this.bot()):"in"===e&&(console.log(this.botMessage,"bot"),this.messages.push({body:this.botMessage,author:"bot",id:this.messages.length}),this.botMessage=""),this.$refs.newMessage.focus();let s=this.$refs.chatArea;s.setScrollPosition(s.$el.scrollHeight+1e3,1)},clearAllMessages(){this.messages=[{id:0,body:"Welcome to WeSafe! Whats your emergency?",author:"bot"}],this.history=[],this.synthesizeSpeech(this.messages[0].body)}}},l=h,u=(t("8041"),t("2877")),g=Object(u["a"])(l,o,i,!1,null,null,null);s["default"]=g.exports},9:function(e,s){},d924:function(e,s,t){}}]);