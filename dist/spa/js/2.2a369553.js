(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{0:function(t,s){},1:function(t,s){},3:function(t,s){},4:function(t,s){},5:function(t,s){},6:function(t,s){},7:function(t,s){},8:function(t,s){},8041:function(t,s,e){"use strict";e("d924")},"8b24":function(t,s,e){"use strict";e.r(s);var o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-page",{},[e("q-scroll-area",{ref:"chatArea",staticClass:"chat-area"},[t._l(t.messages,(function(s){return e("q-chat-message",{key:s.id,staticClass:"q-px-md q-pt-sm",class:{"message-out":"you"===s.author,"message-in":"you"!==s.author},attrs:{text:[s.body],sent:"bot"!=s.author,"bg-color":"bot"==s.author?"secondary":"#e0e0e0","text-color":"bot"==s.author?"white":"black"}},[0==s.id?e("div",{staticClass:"col flex flex-center"},[e("q-btn",{staticClass:"q-ma-xs",staticStyle:{width:"80%"},attrs:{rounded:"",color:"white","no-caps":"","text-color":"primary",label:"Choking"},on:{click:function(s){return t.buttonSend("Choking")}}}),e("q-btn",{staticClass:"q-ma-xs",staticStyle:{width:"80%"},attrs:{rounded:"",color:"white","no-caps":"","text-color":"primary",label:"Bleeding"},on:{click:function(s){return t.buttonSend("Bleeding")}}}),e("q-btn",{staticClass:"q-ma-xs",staticStyle:{width:"80%"},attrs:{rounded:"",color:"white","no-caps":"","text-color":"primary",label:"Drowning"},on:{click:function(s){return t.buttonSend("Drowning")}}}),e("q-btn",{staticClass:"q-ma-xs",staticStyle:{width:"80%"},attrs:{rounded:"",color:"white","no-caps":"","text-color":"primary",label:"Fractures"},on:{click:function(s){return t.buttonSend("Fractures")}}})],1):t._e()])})),t.loading?e("q-chat-message",{staticClass:"q-px-md q-pt-sm message-in",attrs:{"bg-color":"secondary","text-color":"white"}},[e("q-spinner-dots",{attrs:{size:"2rem"}})],1):t._e()],2),e("q-footer",{attrs:{elevated:""}},[e("q-toolbar",[e("q-form",{staticClass:"full-width ",on:{submit:function(s){return t.sendMessage("out")}}},[e("div",{staticClass:"row"},[e("q-input",{ref:"newMessage",staticClass:" col-11 q-pr-sm",attrs:{"bg-color":"white",rounded:"",placeholder:"Message",dense:"",outlined:""},model:{value:t.youMessage,callback:function(s){t.youMessage=s},expression:"youMessage"}},[[e("q-btn",{attrs:{round:"",dense:"",flat:"",type:"submit",icon:"send",color:"primary"}})]],2),e("div",{staticClass:"col-1 flex flex-center"},[e("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"mic",color:"white"}})],1)],1)])],1)],1)],1)},i=[];e("e6cf");const a=e("b2ba");var n={name:"PageIndex",data:()=>({botMessage:"",loading:!1,youMessage:"",history:[],messages:[]}),computed:{user(){return{name:"Davi",age:7}}},mounted(){this.botMessage="Welcome to WeSafe! Whats your emergency?",this.synthesizeSpeech(this.botMessage)},methods:{async synthesizeSpeech(t){new AudioContext;this.loading=!0;const s=a.SpeechConfig.fromSubscription("80336464dd984e3489ab38cbb895823e","eastus");s.speechSynthesisOutputFormat=a.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm;const e=new a.SpeechSynthesizer(s,void 0);e.speakTextAsync(t,(s=>{const o=s.audioData;this.loading=!1,console.log(t),console.log(`Audio data byte size: ${o.byteLength}.`),e.close(),this.sendMessage("in")}),(t=>{console.log(t),e.close()}))},postMessage(){},buttonSend(t){this.youMessage=t,this.sendMessage("out")},async bot(){let t=this.botMessage;const s=JSON.stringify(this.history);console.log(s,"inputtt"),0==this.history[0]?"[0]"==s?t="Is the victim you or someone else?":"[0,0]"==s?t="Is the victim having difficulty breathing?":"[0,0,0]"==s?t="Is the victim over 8 years old?":"[0,0,1]"==s?t="Is the victim conscious?":"[0,0,1,0]"==s||"[0,0,1,1]"==s?t="Is the victim over 8 years old?":"[0,0,0,1]"==s?t="ANSWER1":"[0,0,0,0]"==s?t="ANSWER2":"[0,0,1,0,0]"==s?t="ANSWER6":"[0,0,1,0,1]"==s?t="ANSWER5":"[0,0,1,1,0]"==s?t="ANSWER2":"[0,0,1,1,1]"==s?t="Is the victim Pregnant or Obese?":"[0,0,1,1,1,0]"==s?t="ANSWER3":"[0,0,1,1,1,1]"==s?t="ANSWER4":"[0,1]"===s?t="Are you having trouble breathing?":"[0,1,0]"==s?0==this.user.age.length?t="Are you over 8 years old?":this.user.age>8?(this.history.push(1),t="ANSWER1"):(this.history.push(0),t="ANSWER2+"):"[0,1,1]"==s?0==this.user.age.length?t="Are you over 8 years old?":this.user.age>8?(this.history.push(1),t="ANSWER3.2"):(this.history.push(0),t="Are you alone?"):"[0,1,0,0]"===s?t="ANSWER2+":"[0,1,0,1]"===s?t="ANSWER1":"[0,1,1,1]"===s?t="ANSWER3.2":"[0,1,1,0,0]"===s?t="ANSWER2+":"[0,1,1,0,1]"===s&&(t="CALL 911"):1==s[0]&&(t="other.1"),this.botMessage=t,await this.synthesizeSpeech(t)},async createHistory(t){let s=t.toLowerCase();console.log("Hmessage",s),"no"===s&&0!=this.history.length?this.history.push(0):"yes"===s&&0!=this.history.length?this.history.push(1):"choking"===s&&0==this.history.length?this.history.push(0):"clear"===s?this.clearAllMessages():"me"===s&&0!=this.history.length?this.history.push(1):"other"===s&&0!=this.history.length?this.history.push(0):this.botMessage="Sorry, I didn't understand. Can you repeat?"},sendMessage(t){if(!this.youMessage&&!this.botMessage)return;"out"===t?(this.messages.push({body:this.youMessage,author:"you",id:this.messages.length}),this.createHistory(this.youMessage),this.youMessage="",this.bot()):"in"===t&&(console.log(this.botMessage,"bot"),this.messages.push({body:this.botMessage,author:"bot",id:this.messages.length}),this.botMessage=""),this.$refs.newMessage.focus();let s=this.$refs.chatArea;s.setScrollPosition(s.$el.scrollHeight+1e3,1)},clearAllMessages(){this.messages=[{id:0,body:"Welcome to WeSafe! Whats your emergency?",author:"bot"}],this.history=[],this.synthesizeSpeech(this.messages[0].body)}}},r=n,h=(e("8041"),e("2877")),c=Object(h["a"])(r,o,i,!1,null,null,null);s["default"]=c.exports},9:function(t,s){},d924:function(t,s,e){}}]);